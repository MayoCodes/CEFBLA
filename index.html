<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FBLA fitzone</title>
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <nav id="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <img src="fblaLogo.png" class="nav-logo-img">
                <div class="nav-logo-text">FIT<span>ZONE</span></div>
            </div>
            <ul class="nav-links" id="navLinks">
                <li><a href="#home">Home</a></li>
                <li><a href="#leaderboard">Leaderboard</a></li>
                <li><a href="#stats">Stats</a></li>
                <li><a href="#" id="authLink">Sign Up / Dashboard</a></li>
            </ul>
            <div class="mobile-menu" id="mobileMenu">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
    </nav>

    <section class="countdown-section" id="countdown">
        <div class="countdown-container">
            <h2 class="countdown-title">Challenge Starts In</h2>
            <div class="countdown">
                <div class="countdown-item">
                    <span class="countdown-value" id="days">00</span>
                    <span class="countdown-label">Days</span>
                </div>
                <div class="countdown-item">
                    <span class="countdown-value" id="hours">00</span>
                    <span class="countdown-label">Hours</span>
                </div>
                <div class="countdown-item">
                    <span class="countdown-value" id="minutes">00</span>
                    <span class="countdown-label">Minutes</span>
                </div>
                <div class="countdown-item">
                    <span class="countdown-value" id="seconds">00</span>
                    <span class="countdown-label">Seconds</span>
                </div>
            </div>
        </div>
    </section>

    <section class="hero parallax-container" id="home">
        <div class="hero-background" id="heroBackground"></div>
        <div class="hero-content">
            <h1>FITZONE CHALLENGE</h1>
            <p class="subtitle">SQUAT • DEADLIFT • BENCH PRESS</p>
        </div>
    </section>

    <section class="leaderboard-section scroll-animate" id="leaderboard">
        <div class="leaderboard-container">
            <h2 class="section-title">Leaderboard</h2>
            
            <div class="leaderboard-tabs">
                <button class="tab-btn active" onclick="window.switchTab('squat')">Squat</button>
                <button class="tab-btn" onclick="window.switchTab('deadlift')">Deadlift</button>
                <button class="tab-btn" onclick="window.switchTab('benchpress')">Bench Press</button>
                <button class="tab-btn" onclick="window.switchTab('overall')">Overall</button>
            </div>

            <div class="leaderboard-table">
                <table>
                    <thead>
                        <tr>
                            <th>Rank</th>
                            <th>Participant</th>
                            <th>Weight (lbs)</th>
                            <th>Sets</th>
                            <th>Total Weight</th>
                        </tr>
                    </thead>
                    <tbody id="leaderboardBody">
                    </tbody>
                </table>
            </div>
        </div>
    </section>

    <section class="leaderboard-section scroll-animate why-join-section">
        <div class="leaderboard-container why-join-container">
            <h2 class="section-title why-join-title">WHY JOIN</h2>
            <div class="why-join-grid">
                <div class="why-join-item">
                    <img src="https://images.unsplash.com/photo-1534438327276-14e5300c3a48?w=400&h=300&fit=crop&q=80" 
                         class="why-join-img" alt="Gym">
                    <div>
                        <h3 class="why-join-heading red-heading">TEST YOUR LIMITS</h3>
                        <p class="why-join-text">
                            Push beyond what you thought possible and compete against people around the world to reach your full potential.
                        </p>
                    </div>
                </div>

                <div class="why-join-item reverse-item">
                    <img src="https://images.unsplash.com/photo-1581009146145-b5ef050c2e1e?w=400&h=300&fit=crop&q=80" 
                         class="why-join-img" alt="Powerlifting">
                    <div class="why-join-text-right">
                        <h3 class="why-join-heading orange-heading">LIVE COMPETITION</h3>
                        <p class="why-join-text">
                            Everything is updated in real-time so you can alwasy see how you stack against the competition
                        </p>
                    </div>
                </div>

                <div class="why-join-item">
                    <img src="https://images.unsplash.com/photo-1517836357463-d25dfeac3438?w=400&h=300&fit=crop&q=80" 
                         class="why-join-img" alt="Training">
                    <div>
                        <h3 class="why-join-heading green-heading">TRACK EVERYTHING</h3>
                        <p class="why-join-text">
                            Using MediaPipe Pose Landmarker we are able to minmize manual logging as much as possible. Let us do the counting for you.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="stats-section scroll-animate process-section">
        <div class="stats-container process-container">
            <h2 class="section-title process-title">THE PROCESS</h2>
            
            <div class="process-box">
                <div class="process-step">
                    <div class="process-number red-number">01</div>
                    <div>
                        <h3 class="process-step-title">SIGN UP</h3>
                        <p class="process-step-text">Create your account. Takes 30 seconds. Email or Google. Thats it.</p>
                    </div>
                </div>

                <div class="process-step">
                    <div class="process-number orange-number">02</div>
                    <div>
                        <h3 class="process-step-title">LIFT</h3>
                        <p class="process-step-text">Squat, deadlift, bench press. Hit the weights. Push your limits.</p>
                    </div>
                </div>

                <div class="process-step">
                    <div class="process-number green-number">03</div>
                    <div>
                        <h3 class="process-step-title">LOG IT</h3>
                        <p class="process-step-text">Open dashboard. Each rep detected counts as one set with your max weight.</p>
                    </div>
                </div>

                <div class="process-step last-step">
                    <div class="process-number white-number">04</div>
                    <div>
                        <h3 class="process-step-title">COMPETE</h3>
                        <p class="process-step-text">Check leaderboards. See where you rank. Beat your records.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="stats-section scroll-animate" id="stats">
        <div class="stats-container">
            <h2 class="section-title">Competition Statistics</h2>
            <div class="stats-grid">
                <div class="stat-card">
                    <h3>Total Participants</h3>
                    <div class="stat-value" id="totalParticipants">0</div>
                    <div class="chart-container">
                        <canvas id="participationChart"></canvas>
                    </div>
                </div>
                <div class="stat-card">
                    <h3>Total Weight Lifted</h3>
                    <div class="stat-value" id="totalVolume">0</div>
                    <p class="stats-subtitle">pounds across all exercises</p>
                </div>
                <div class="stat-card">
                    <h3>Exercise Distribution</h3>
                    <div class="chart-container">
                        <canvas id="exerciseChart"></canvas>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <div class="global-error-banner" id="globalErrorBanner">
        <p>WARNING: Connecting to Firestore...</p>
        <button class="banner-close" id="closeBanner">&times;</button>
    </div>

    <div class="modal-overlay" id="dashboardModal">
        <div class="dashboard-modal">
            <button class="modal-close" id="closeDashboard">&times;</button>
            
            <div class="dashboard-header">
                <h2>My Dashboard</h2>
                <button class="logout-btn" id="logoutBtn">Sign Out</button>
            </div>

            <div class="user-stats">
                <h3>Your Best Lifts</h3>
                <div class="stats-row">
                    <div class="stat-item">
                        <div class="label">Squat</div>
                        <div class="value" id="userSquat">-</div>
                    </div>
                    <div class="stat-item">
                        <div class="label">Deadlift</div>
                        <div class="value" id="userDeadlift">-</div>
                    </div>
                    <div class="stat-item">
                        <div class="label">Bench</div>
                        <div class="value" id="userBench">-</div>
                    </div>
                </div>
            </div>

            <div class="achievement-section">
                <h3>Log New Achievement</h3>
                
                <div class="logging-methods">
                    <button class="method-tab active" data-method="camera">AI Counter</button>
                    <button class="method-tab" data-method="manual">Manual Entry</button>
                </div>

                <div class="success-message-dashboard" id="successMessageDashboard">Achievement saved successfully!</div>

                <div class="logging-content active" id="cameraLogging">
                    <div class="split-view">
                        <div class="camera-section">
                            <div class="camera-controls">
                                <button id="cameraSquatBtn" class="active">Squat</button>
                                <button id="cameraBenchBtn">Bench Press</button>
                                <button id="cameraDeadliftBtn">Deadlift</button>
                                <button id="cameraResetBtn" class="camera-reset-btn">Reset</button>
                            </div>

                            <div id="cameraStats">
                                <div class="exercise-label" id="cameraExerciseLabel">SQUAT</div>
                                <div class="count-display" id="cameraCount">0</div>
                                <div class="reps-detected-label">Sets Completed</div>
                            </div>

                            <div id="cameraVideoContainer">
                                <video id="cameraWebcam" autoplay playsinline></video>
                                <canvas id="cameraCanvas"></canvas>
                                <div id="cameraDebugInfo"></div>
                            </div>

                            <div id="cameraStatus">Loading AI model...</div>
                        </div>

                        <div class="camera-section">
                            <h4 class="save-set-title">Save Your Sets</h4>
                            
                            <div class="form-group">
                                <label for="cameraWeight">Weight per Rep (lbs)</label>
                                <input type="number" id="cameraWeight" placeholder="0" min="0" step="0.5">
                            </div>

                            <div class="form-group">
                                <label for="cameraSets">Sets Detected</label>
                                <input type="number" id="cameraSets" value="0" min="0" readonly class="camera-sets-input">
                            </div>

                            <button type="button" class="save-camera-btn" id="saveCameraAchievement">
                                Save Achievement
                            </button>
                        </div>
                    </div>
                </div>

                <div class="logging-content" id="manualLogging">
                    <form id="dashboardAchievementForm">
                    <div class="form-group">
                        <label for="dashboardExercise">Exercise Type</label>
                        <select id="dashboardExercise" required>
                            <option value="">Select Exercise</option>
                            <option value="squat">Squat</option>
                            <option value="deadlift">Deadlift</option>
                            <option value="benchpress">Bench Press</option>
                        </select>
                    </div>

                    <div class="exercise-inputs">
                        <div class="form-group">
                            <label for="dashboardWeight">Weight per Rep (lbs)</label>
                            <input type="number" id="dashboardWeight" required placeholder="0" min="0" step="0.5">
                        </div>
                        <div class="form-group">
                            <label for="dashboardSets">Sets (one rep each)</label>
                            <input type="number" id="dashboardSets" required placeholder="0" min="1">
                        </div>
                    </div>

                    <button type="submit" class="auth-btn">Save Achievement</button>
                </form>
                </div>
            </div>

            <div class="current-achievements">
                <h3 class="current-records-title">Current Records</h3>
                <div class="achievement-card">
                    <div>
                        <div class="exercise-name">Squat</div>
                        <div class="exercise-stats" id="squatStats">Not logged</div>
                    </div>
                    <div class="volume" id="squatVolume">-</div>
                </div>
                <div class="achievement-card">
                    <div>
                        <div class="exercise-name">Deadlift</div>
                        <div class="exercise-stats" id="deadliftStats">Not logged</div>
                    </div>
                    <div class="volume" id="deadliftVolume">-</div>
                </div>
                <div class="achievement-card">
                    <div>
                        <div class="exercise-name">Bench Press</div>
                        <div class="exercise-stats" id="benchStats">Not logged</div>
                    </div>
                    <div class="volume" id="benchVolume">-</div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="authModal">
        <div class="auth-modal">
            <button class="modal-close" id="closeModal">&times;</button>
            <h2>Welcome to FitZone</h2>
            <p>Join the challenge and track your progress</p>

            <div class="auth-tabs">
                <button class="auth-tab active" data-tab="signup">Sign Up</button>
                <button class="auth-tab" data-tab="login">Login</button>
            </div>

            <div class="error-message" id="errorMessage"></div>

            <form class="auth-form active" id="signupForm">
                <div class="form-group">
                    <label for="signupEmail">Email</label>
                    <input type="email" id="signupEmail" required placeholder="your@email.com">
                </div>
                <div class="form-group">
                    <label for="signupPassword">Password</label>
                    <input type="password" id="signupPassword" required placeholder="Min. 6 characters">
                </div>
                <div class="form-group">
                    <label for="signupName">Display Name</label>
                    <input type="text" id="signupName" required placeholder="Your name">
                </div>
                <button type="submit" class="auth-btn">Create Account</button>
            </form>

            <form class="auth-form" id="loginForm">
                <div class="form-group">
                    <label for="loginEmail">Email</label>
                    <input type="email" id="loginEmail" required placeholder="your@email.com">
                </div>
                <div class="form-group">
                    <label for="loginPassword">Password</label>
                    <input type="password" id="loginPassword" required placeholder="Your password">
                </div>
                <button type="submit" class="auth-btn">Sign In</button>
            </form>

            <div class="auth-divider">
                <span>OR</span>
            </div>

            <button class="google-btn" id="googleSignIn">
                <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M17.64 9.2c0-.637-.057-1.251-.164-1.84H9v3.481h4.844c-.209 1.125-.843 2.078-1.796 2.717v2.258h2.908c1.702-1.567 2.684-3.874 2.684-6.615z" fill="#4285F4"/>
                    <path d="M9 18c2.43 0 4.467-.806 5.956-2.18l-2.908-2.259c-.806.54-1.837.86-3.048.86-2.344 0-4.328-1.584-5.036-3.711H.957v2.332C2.438 15.983 5.482 18 9 18z" fill="#34A853"/>
                    <path d="M3.964 10.71c-.18-.54-.282-1.117-.282-1.71 0-.593.102-1.17.282-1.71V4.958H.957C.347 6.173 0 7.548 0 9s.348 2.827.957 4.042l3.007-2.332z" fill="#FBBC05"/>
                    <path d="M9 3.58c1.321 0 2.508.454 3.44 1.345l2.582-2.58C13.463.891 11.426 0 9 0 5.482 0 2.438 2.017.957 4.958L3.964 7.29C4.672 5.163 6.656 3.58 9 3.58z" fill="#EA4335"/>
                </svg>
                Continue with Google
            </button>
        </div>
    </div>

    <script type="module" src="firebase.js"></script>
    <script type="module" src="camera.js"></script>
    <script src="main.js"></script>
</body>
</html>