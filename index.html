<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FBLA fitzone</title>
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <nav id="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <img src="fblaLogo.png" class="nav-logo-img">
                <div class="nav-logo-text">FIT<span>ZONE</span></div>
            </div>
            <ul class="nav-links" id="navLinks">
                <li><a href="#home">Home</a></li>
                <li><a href="#leaderboard">Leaderboard</a></li>
                <li><a href="#stats">Stats</a></li>
                <li><a href="#" id="authLink">Sign Up / Dashboard</a></li>
            </ul>
            <div class="mobile-menu" id="mobileMenu">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
    </nav>

    <section class="countdown-section" id="countdown">
        <div class="countdown-container">
            <h2 class="countdown-title">Challenge Starts In</h2>
            <div class="countdown">
                <div class="countdown-item">
                    <span class="countdown-value" id="days">00</span>
                    <span class="countdown-label">Days</span>
                </div>
                <div class="countdown-item">
                    <span class="countdown-value" id="hours">00</span>
                    <span class="countdown-label">Hours</span>
                </div>
                <div class="countdown-item">
                    <span class="countdown-value" id="minutes">00</span>
                    <span class="countdown-label">Minutes</span>
                </div>
                <div class="countdown-item">
                    <span class="countdown-value" id="seconds">00</span>
                    <span class="countdown-label">Seconds</span>
                </div>
            </div>
        </div>
    </section>

    <section class="hero parallax-container" id="home">
        <div class="hero-background" id="heroBackground"></div>
        <div class="hero-content">
            <h1>FITZONE CHALLENGE</h1>
            <p class="subtitle">SQUAT • DEADLIFT • BENCH PRESS</p>
        </div>
    </section>

    <section class="leaderboard-section scroll-animate" id="leaderboard">
        <div class="leaderboard-container">
            <h2 class="section-title">Leaderboard</h2>
            
            <div class="leaderboard-tabs">
                <button class="tab-btn active" onclick="window.switchTab('squat')">Squat</button>
                <button class="tab-btn" onclick="window.switchTab('deadlift')">Deadlift</button>
                <button class="tab-btn" onclick="window.switchTab('benchpress')">Bench Press</button>
                <button class="tab-btn" onclick="window.switchTab('overall')">Overall</button>
            </div>

            <div class="leaderboard-table">
                <table>
                    <thead>
                        <tr>
                            <th>Rank</th>
                            <th>Participant</th>
                            <th>Weight (lbs)</th>
                            <th>Sets</th>
                            <th>Reps</th>
                            <th>Total Volume</th>
                        </tr>
                    </thead>
                    <tbody id="leaderboardBody">
                    </tbody>
                </table>
            </div>
        </div>
    </section>

    <section class="leaderboard-section scroll-animate" style="background: linear-gradient(rgba(10, 10, 10, 0.9), rgba(10, 10, 10, 0.9)), url('https://images.unsplash.com/photo-1571902943202-507ec2618e8f?w=1600&q=80') center/cover fixed;">
        <div class="leaderboard-container" style="max-width: 900px;">
            <h2 class="section-title" style="text-align: left; margin-bottom: 2.5rem;">WHY JOIN</h2>
            <div style="display: flex; flex-direction: column; gap: 3rem;">
                <div style="display: flex; gap: 2rem; align-items: flex-start;">
                    <img src="https://images.unsplash.com/photo-1534438327276-14e5300c3a48?w=400&h=300&fit=crop&q=80" 
                         style="width: 220px; height: 160px; object-fit: cover; border: 3px solid rgba(230, 57, 70, 0.5);" alt="Gym">
                    <div>
                        <h3 style="font-size: 1.6rem; color: #e63946; margin-bottom: 1rem; letter-spacing: 2px;">TEST YOUR LIMITS</h3>
                        <p style="color: #bbb; line-height: 1.8; font-size: 1.05rem;">
                            Push beyond what you thought possible. Track every lift. See measurable progress. Compete against yourself and others.
                        </p>
                    </div>
                </div>

                <div style="display: flex; gap: 2rem; align-items: flex-start; flex-direction: row-reverse;">
                    <img src="https://images.unsplash.com/photo-1581009146145-b5ef050c2e1e?w=400&h=300&fit=crop&q=80" 
                         style="width: 220px; height: 160px; object-fit: cover; border: 3px solid rgba(247, 127, 0, 0.5);" alt="Powerlifting">
                    <div style="text-align: right;">
                        <h3 style="font-size: 1.6rem; color: #f77f00; margin-bottom: 1rem; letter-spacing: 2px;">REAL COMPETITION</h3>
                        <p style="color: #bbb; line-height: 1.8; font-size: 1.05rem;">
                            No fake numbers. No shortcuts. Just you, the barbell, and the truth. Live leaderboards update as lifts are logged.
                        </p>
                    </div>
                </div>

                <div style="display: flex; gap: 2rem; align-items: flex-start;">
                    <img src="https://images.unsplash.com/photo-1517836357463-d25dfeac3438?w=400&h=300&fit=crop&q=80" 
                         style="width: 220px; height: 160px; object-fit: cover; border: 3px solid rgba(6, 255, 165, 0.5);" alt="Training">
                    <div>
                        <h3 style="font-size: 1.6rem; color: #06ffa5; margin-bottom: 1rem; letter-spacing: 2px;">TRACK EVERYTHING</h3>
                        <p style="color: #bbb; line-height: 1.8; font-size: 1.05rem;">
                            AI-powered rep counting or manual logging. Your choice. Weight, sets, reps - all tracked automatically.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="stats-section scroll-animate" style="background: linear-gradient(rgba(17, 17, 17, 0.9), rgba(17, 17, 17, 0.9)), url('https://images.unsplash.com/photo-1554284126-aa88f22d8b74?w=1600&q=80') center/cover fixed;">
        <div class="stats-container" style="max-width: 1000px;">
            <h2 class="section-title" style="margin-bottom: 3rem;">THE PROCESS</h2>
            
            <div style="background: rgba(26, 26, 26, 0.7); padding: 3rem; border: 3px solid rgba(255, 255, 255, 0.15);">
                <div style="display: grid; grid-template-columns: 80px 1fr; gap: 2rem; align-items: start; margin-bottom: 3rem; padding-bottom: 2rem; border-bottom: 1px solid rgba(255,255,255,0.1);">
                    <div style="font-size: 3.5rem; color: #e63946; font-weight: bold; line-height: 1;">01</div>
                    <div>
                        <h3 style="font-size: 1.4rem; color: #fff; margin-bottom: 0.75rem; letter-spacing: 2px;">SIGN UP</h3>
                        <p style="color: #999; line-height: 1.7;">Create your account. Takes 30 seconds. Email or Google. Thats it.</p>
                    </div>
                </div>

                <div style="display: grid; grid-template-columns: 80px 1fr; gap: 2rem; align-items: start; margin-bottom: 3rem; padding-bottom: 2rem; border-bottom: 1px solid rgba(255,255,255,0.1);">
                    <div style="font-size: 3.5rem; color: #f77f00; font-weight: bold; line-height: 1;">02</div>
                    <div>
                        <h3 style="font-size: 1.4rem; color: #fff; margin-bottom: 0.75rem; letter-spacing: 2px;">LIFT</h3>
                        <p style="color: #999; line-height: 1.7;">Squat, deadlift, bench press. Hit the weights. Push your limits.</p>
                    </div>
                </div>

                <div style="display: grid; grid-template-columns: 80px 1fr; gap: 2rem; align-items: start; margin-bottom: 3rem; padding-bottom: 2rem; border-bottom: 1px solid rgba(255,255,255,0.1);">
                    <div style="font-size: 3.5rem; color: #06ffa5; font-weight: bold; line-height: 1;">03</div>
                    <div>
                        <h3 style="font-size: 1.4rem; color: #fff; margin-bottom: 0.75rem; letter-spacing: 2px;">LOG IT</h3>
                        <p style="color: #999; line-height: 1.7;">Open dashboard. Log weight and reps. System calculates total volume.</p>
                    </div>
                </div>

                <div style="display: grid; grid-template-columns: 80px 1fr; gap: 2rem; align-items: start;">
                    <div style="font-size: 3.5rem; color: #fff; font-weight: bold; line-height: 1;">04</div>
                    <div>
                        <h3 style="font-size: 1.4rem; color: #fff; margin-bottom: 0.75rem; letter-spacing: 2px;">COMPETE</h3>
                        <p style="color: #999; line-height: 1.7;">Check leaderboards. See where you rank. Beat your records.</p>
                    </div>
                </div>
            </div>

            <div style="text-align: center; padding: 2.5rem; background: rgba(230, 57, 70, 0.15); border: 2px dashed #e63946; margin-top: 2rem;">
                <p style="font-size: 1.4rem; color: #e63946; letter-spacing: 2px; line-height: 1.8;">
                    VOLUME = WEIGHT × SETS × REPS<br>
                    <span style="font-size: 0.9rem; color: #999;">HIGHEST TOTAL VOLUME WINS</span>
                </p>
            </div>
        </div>
    </section>

    <section class="stats-section scroll-animate" id="stats">
        <div class="stats-container">
            <h2 class="section-title">Competition Statistics</h2>
            <div class="stats-grid">
                <div class="stat-card">
                    <h3>Total Participants</h3>
                    <div class="stat-value" id="totalParticipants">0</div>
                    <div class="chart-container">
                        <canvas id="participationChart"></canvas>
                    </div>
                </div>
                <div class="stat-card">
                    <h3>Total Volume Lifted</h3>
                    <div class="stat-value" id="totalVolume">0</div>
                    <p style="color: #999; font-size: 0.875rem; margin-top: 0.5rem;">pounds across all exercises</p>
                </div>
                <div class="stat-card">
                    <h3>Exercise Distribution</h3>
                    <div class="chart-container">
                        <canvas id="exerciseChart"></canvas>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <div class="global-error-banner" id="globalErrorBanner">
        <p>WARNING: Connecting to Firestore...</p>
        <button class="banner-close" id="closeBanner">&times;</button>
    </div>

    <div class="modal-overlay" id="dashboardModal">
        <div class="dashboard-modal">
            <button class="modal-close" id="closeDashboard">&times;</button>
            
            <div class="dashboard-header">
                <h2>My Dashboard</h2>
                <button class="logout-btn" id="logoutBtn">Sign Out</button>
            </div>

            <div class="user-stats">
                <h3>Your Best Lifts</h3>
                <div class="stats-row">
                    <div class="stat-item">
                        <div class="label">Squat</div>
                        <div class="value" id="userSquat">-</div>
                    </div>
                    <div class="stat-item">
                        <div class="label">Deadlift</div>
                        <div class="value" id="userDeadlift">-</div>
                    </div>
                    <div class="stat-item">
                        <div class="label">Bench</div>
                        <div class="value" id="userBench">-</div>
                    </div>
                </div>
            </div>

            <div class="achievement-section">
                <h3>Log New Achievement</h3>
                
                <div class="logging-methods">
                    <button class="method-tab active" data-method="camera">AI Counter</button>
                    <button class="method-tab" data-method="manual">Manual Entry</button>
                </div>

                <div class="success-message-dashboard" id="successMessageDashboard">Achievement saved successfully!</div>

                <div class="logging-content active" id="cameraLogging">
                    <div class="split-view">
                        <div class="camera-section">
                            <div class="camera-controls">
                                <button id="cameraSquatBtn" class="active">Squat</button>
                                <button id="cameraBenchBtn">Bench Press</button>
                                <button id="cameraDeadliftBtn">Deadlift</button>
                                <button id="cameraResetBtn" style="margin-left: auto;">Reset</button>
                            </div>

                            <div id="cameraStats">
                                <div class="exercise-label" id="cameraExerciseLabel">SQUAT</div>
                                <div class="count-display" id="cameraCount">0</div>
                                <div style="font-size: 0.75rem; color: #666; margin-top: 0.5rem;">Reps Detected</div>
                            </div>

                            <div id="cameraVideoContainer">
                                <video id="cameraWebcam" autoplay playsinline></video>
                                <canvas id="cameraCanvas"></canvas>
                                <div id="cameraDebugInfo"></div>
                            </div>

                            <div id="cameraStatus">Loading AI model...</div>
                            
                            <div style="margin-top: 1rem; padding: 1rem; background: rgba(230, 57, 70, 0.1); border: 2px dashed rgba(230, 57, 70, 0.3); border-radius: 4px; text-align: center;">
                                <div style="font-size: 0.875rem; color: #e63946; font-weight: bold; margin-bottom: 0.5rem;">RAISE PALM TO ADD SET</div>
                                <div style="font-size: 0.75rem; color: #999;">Show palm like high-five to increment sets and reset reps</div>
                            </div>
                        </div>

                        <div class="camera-section">
                            <h4 style="font-size: 1.1rem; margin-bottom: 1rem; color: #fff;">Save Your Set</h4>
                            
                            <div class="form-group">
                                <label>Detected Reps (editable)</label>
                                <input type="number" id="cameraRepsInput" value="0" min="0"
                                       style="background: rgba(15, 15, 15, 0.8); border: 2px solid rgba(230, 57, 70, 0.3);">
                            </div>

                            <div class="form-group">
                                <label for="cameraWeight">Weight (lbs)</label>
                                <input type="number" id="cameraWeight" placeholder="0" min="0" step="0.5">
                            </div>

                            <div class="form-group">
                                <label for="cameraSets">Current Sets</label>
                                <input type="number" id="cameraSets" value="1" min="1" readonly
                                       style="background: rgba(15, 15, 15, 0.8); border: 2px solid rgba(255, 255, 255, 0.2);">
                            </div>

                            <button type="button" class="save-camera-btn" id="saveCameraAchievement">
                                Save Achievement
                            </button>
                        </div>
                    </div>
                </div>

                <div class="logging-content" id="manualLogging">
                    <form id="dashboardAchievementForm">
                    <div class="form-group">
                        <label for="dashboardExercise">Exercise Type</label>
                        <select id="dashboardExercise" required>
                            <option value="">Select Exercise</option>
                            <option value="squat">Squat</option>
                            <option value="deadlift">Deadlift</option>
                            <option value="benchpress">Bench Press</option>
                        </select>
                    </div>

                    <div class="exercise-inputs">
                        <div class="form-group">
                            <label for="dashboardWeight">Weight (lbs)</label>
                            <input type="number" id="dashboardWeight" required placeholder="0" min="0" step="0.5">
                        </div>
                        <div class="form-group">
                            <label for="dashboardSets">Sets</label>
                            <input type="number" id="dashboardSets" required placeholder="0" min="1">
                        </div>
                        <div class="form-group">
                            <label for="dashboardReps">Reps</label>
                            <input type="number" id="dashboardReps" required placeholder="0" min="1">
                        </div>
                    </div>

                    <button type="submit" class="auth-btn">Save Achievement</button>
                </form>
                </div>
            </div>

            <div class="current-achievements">
                <h3 style="font-size: 1rem; color: #999; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 1rem;">Current Records</h3>
                <div class="achievement-card">
                    <div>
                        <div class="exercise-name">Squat</div>
                        <div class="exercise-stats" id="squatStats">Not logged</div>
                    </div>
                    <div class="volume" id="squatVolume">-</div>
                </div>
                <div class="achievement-card">
                    <div>
                        <div class="exercise-name">Deadlift</div>
                        <div class="exercise-stats" id="deadliftStats">Not logged</div>
                    </div>
                    <div class="volume" id="deadliftVolume">-</div>
                </div>
                <div class="achievement-card">
                    <div>
                        <div class="exercise-name">Bench Press</div>
                        <div class="exercise-stats" id="benchStats">Not logged</div>
                    </div>
                    <div class="volume" id="benchVolume">-</div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="authModal">
        <div class="auth-modal">
            <button class="modal-close" id="closeModal">&times;</button>
            <h2>Welcome to FitZone</h2>
            <p>Join the challenge and track your progress</p>

            <div class="auth-tabs">
                <button class="auth-tab active" data-tab="signup">Sign Up</button>
                <button class="auth-tab" data-tab="login">Login</button>
            </div>

            <div class="error-message" id="errorMessage"></div>

            <form class="auth-form active" id="signupForm">
                <div class="form-group">
                    <label for="signupEmail">Email</label>
                    <input type="email" id="signupEmail" required placeholder="your@email.com">
                </div>
                <div class="form-group">
                    <label for="signupPassword">Password</label>
                    <input type="password" id="signupPassword" required placeholder="Min. 6 characters">
                </div>
                <div class="form-group">
                    <label for="signupName">Display Name</label>
                    <input type="text" id="signupName" required placeholder="Your name">
                </div>
                <button type="submit" class="auth-btn">Create Account</button>
            </form>

            <form class="auth-form" id="loginForm">
                <div class="form-group">
                    <label for="loginEmail">Email</label>
                    <input type="email" id="loginEmail" required placeholder="your@email.com">
                </div>
                <div class="form-group">
                    <label for="loginPassword">Password</label>
                    <input type="password" id="loginPassword" required placeholder="Your password">
                </div>
                <button type="submit" class="auth-btn">Sign In</button>
            </form>

            <div class="auth-divider">
                <span>OR</span>
            </div>

            <button class="google-btn" id="googleSignIn">
                <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M17.64 9.2c0-.637-.057-1.251-.164-1.84H9v3.481h4.844c-.209 1.125-.843 2.078-1.796 2.717v2.258h2.908c1.702-1.567 2.684-3.874 2.684-6.615z" fill="#4285F4"/>
                    <path d="M9 18c2.43 0 4.467-.806 5.956-2.18l-2.908-2.259c-.806.54-1.837.86-3.048.86-2.344 0-4.328-1.584-5.036-3.711H.957v2.332C2.438 15.983 5.482 18 9 18z" fill="#34A853"/>
                    <path d="M3.964 10.71c-.18-.54-.282-1.117-.282-1.71 0-.593.102-1.17.282-1.71V4.958H.957C.347 6.173 0 7.548 0 9s.348 2.827.957 4.042l3.007-2.332z" fill="#FBBC05"/>
                    <path d="M9 3.58c1.321 0 2.508.454 3.44 1.345l2.582-2.58C13.463.891 11.426 0 9 0 5.482 0 2.438 2.017.957 4.958L3.964 7.29C4.672 5.163 6.656 3.58 9 3.58z" fill="#EA4335"/>
                </svg>
                Continue with Google
            </button>
        </div>
    </div>

    <script type="module" src="firebase.js"></script>
    <script type="module" src="camera.js"></script>
    <script src="main.js"></script>
</body>
</html>